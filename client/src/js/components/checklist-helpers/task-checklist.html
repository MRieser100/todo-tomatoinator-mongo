<div class="task-checklist">
    <div class="task-checklist-content-wrapper">
        <span>
            <form class="task-note-todo">
                <fieldset class="form-group fieldset-single-checkbox">
                    <input class="note-todo-checkbox" ng-model="$ctrl.note.isComplete" type="checkbox" ng-click="$ctrl.toggleTodo($ctrl.note)"></input>
                </fieldset>
            </form>
        </span>
        <span ng-class="{'greyed-out': $ctrl.note.isComplete}">{{ $ctrl.note.title }}</span>
        <!--<span>&nbsp;|{{ $ctrl.note.order }}</span>   -->
        <div class="checklist-progress-wrapper">
            <span class="checklist-progress-percentage">{{ $ctrl.rawCompletionPercentage | prettyPercentage }}</span>
            <div class="checklist-progress-bar">
                <md-progress-linear class="checklist-progress-linear" md-mode="determinate" ng-value="$ctrl.rawCompletionPercentage"></md-progress-linear>
            </div>
        </div>

        <div class="task-checklist-steps-wrapper">
            <ul class="task-checklist" ui-sortable="$ctrl.sortableStepHandlers" ng-model="$ctrl.steps">
                <li ng-repeat="step in $ctrl.steps">
                    <checklist-step step="step" index="$index"></checklist-step>
                </li>                
            </ul>
        </div>

        <div class="add-step-wrapper">
            <div ng-hide="$ctrl.showStepForm" class="add-step-icon" ng-click="$ctrl.toggleStepForm()">
                <i class="ion-plus-round"></i>
            </div>
            <div ng-show="$ctrl.showStepForm" class="add-step-icon-close" ng-click="$ctrl.toggleStepForm()">
                <i class="ion-minus-round"></i>
            </div>    
        </div>

        <span class="checklist-controls-outer">
            <div class="checklist-controls-inner">
                <span class="checklist-delete-wrapper">
                    <span type="button" class="note-delete" aria-label="delete" ng-click="$ctrl.deleteChecklist($ctrl.note.id, $ctrl.index)">
                        <span aria-hidden="true">&times;</span>
                    </span>
                </span>               
            </div>
        </span>   
    </div>

    <form ng-show="$ctrl.showStepForm" class="card add-step-form" ng-submit="$ctrl.addStep()">
        <fieldset ng-disabled="$ctrl.newStepForm.isSubmitting">
            <fieldset class="form-group">
                <input class="form-control"
                    type="text"
                    placeholder="Step title"
                    ng-model="$ctrl.newStepForm.title">
                </input>                
            </fieldset>
        </fieldset>

        <button class="btn btn-primary btn-sm btn-block" type="submit">
            Add
        </button>
    </form>     
<div>
